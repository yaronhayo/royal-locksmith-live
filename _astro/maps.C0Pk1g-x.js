import{j as t,c as g}from"./cn.zzlncTwb.js";import{r as a}from"./index.BmW6Ki2V.js";function C({apiKey:f,center:u,zoom:m=10,serviceAreas:d=[],className:y,height:i="400px"}){const n=a.useRef(null),[c,o]=a.useState(!1),[x,v]=a.useState(null);return a.useEffect(()=>{const s=window,r=()=>!!(s.google?.maps?.Map&&typeof s.google.maps.Map=="function");if(r()){o(!0);return}if(s.initServiceAreaMap=()=>{if(r())o(!0);else{const l=setInterval(()=>{r()&&(o(!0),clearInterval(l))},50);setTimeout(()=>clearInterval(l),5e3)}},document.querySelector('script[src*="maps.googleapis.com"]')){const l=setInterval(()=>{r()&&(o(!0),clearInterval(l))},100);setTimeout(()=>clearInterval(l),1e4);return}const e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${f}&libraries=places&loading=async&callback=initServiceAreaMap`,e.async=!0,e.defer=!0,e.onerror=()=>{v("Failed to load Google Maps. Please check your API key.")},document.head.appendChild(e),()=>{delete s.initServiceAreaMap}},[f]),a.useEffect(()=>{if(!c||!n.current)return;const r=window.google,p=new r.maps.Map(n.current,{center:u,zoom:m,styles:h(),disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0});d.forEach(e=>{new r.maps.Circle({strokeColor:"#eca413",strokeOpacity:.8,strokeWeight:2,fillColor:"#eca413",fillOpacity:.15,map:p,center:e.coordinates,radius:8e3}),new r.maps.Marker({position:e.coordinates,map:p,title:e.name,icon:{path:r.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#eca413",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},label:{text:e.name,color:"#1f2937",fontSize:"12px",fontWeight:"bold",className:"map-label"}})})},[c,u,m,d]),x?t.jsx("div",{className:g("flex items-center justify-center rounded-xl bg-muted text-muted-foreground",y),style:{height:i},children:t.jsx("p",{children:x})}):t.jsxs("div",{className:g("relative overflow-hidden rounded-xl",y),children:[!c&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",style:{height:i},children:t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{children:"Loading map..."})]})}),t.jsx("div",{ref:n,className:"w-full",style:{height:i},"aria-label":"Service area map"})]})}function h(){return[{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]}export{C as ServiceAreaMap};
