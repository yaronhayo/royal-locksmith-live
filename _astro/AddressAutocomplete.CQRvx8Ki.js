import{j as s,c as x}from"./cn.zzlncTwb.js";import{r as c}from"./index.BmW6Ki2V.js";function N({name:e,label:r,placeholder:t="Enter your address",required:o=!1,countryRestriction:n="us",onAddressSelect:a,error:l,className:d,defaultValue:i=""}){const u=c.useRef(null),m=c.useRef(null),[p,f]=c.useState(i),[g,h]=c.useState(!1);return c.useEffect(()=>{const e=()=>!!window.google?.maps?.places&&(h(!0),!0);if(e())return;const r=setInterval(()=>{e()&&clearInterval(r)},100),t=setTimeout(()=>{clearInterval(r)},1e4);return()=>{clearInterval(r),clearTimeout(t)}},[]),c.useEffect(()=>{if(!g||!u.current||m.current)return;const e=window;return m.current=new e.google.maps.places.Autocomplete(u.current,{componentRestrictions:{country:n},fields:["address_components","formatted_address","geometry"],types:["address"]}),m.current.addListener("place_changed",()=>{const e=m.current?.getPlace();if(!e?.address_components)return;const r=_(e);f(r.formattedAddress),a&&a(r)}),()=>{m.current&&e.google.maps.event.clearInstanceListeners(m.current)}},[g,n,a]),s.jsxs("div",{className:x("space-y-2",d),children:[r&&s.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-foreground",children:[r,o&&s.jsx("span",{className:"ml-1 text-destructive",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:u,type:"text",id:e,name:e,value:p,onChange:e=>f(e.target.value),placeholder:t,required:o,autoComplete:"off",className:x("w-full rounded-lg border bg-background px-4 py-3 text-foreground transition-colors","placeholder:text-muted-foreground","focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",l?"border-destructive focus:border-destructive focus:ring-destructive/20":"border-input"),"aria-invalid":l?"true":"false","aria-describedby":l?`${e}-error`:void 0}),s.jsx("div",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:s.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),l&&s.jsx("p",{id:`${e}-error`,className:"text-sm text-destructive",children:l}),!g&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading address suggestions..."})]})}function _(e){const r={formattedAddress:e.formatted_address||""};return e.geometry?.location&&(r.lat=e.geometry.location.lat(),r.lng=e.geometry.location.lng()),e.address_components?.forEach(e=>{switch(e.types[0]){case"street_number":r.streetNumber=e.long_name;break;case"route":r.streetName=e.long_name;break;case"locality":r.city=e.long_name;break;case"administrative_area_level_1":r.state=e.short_name;break;case"postal_code":r.postalCode=e.long_name;break;case"country":r.country=e.short_name}}),r}export{N as A};