import{j as e,c as n}from"./cn.zzlncTwb.js";import{r as i}from"./index.BmW6Ki2V.js";import{s as p}from"./site.config.CN9kl7_B.js";import{u as D,L as H,f as O,v as x,b as V}from"./LegalModal.CIRfRcHK.js";import{m as C}from"./proxy.DU87lMsk.js";import"./index.CoPBpCLj.js";function Y({recaptchaSiteKey:r,endpoint:t="/api/contact.php",defaultService:s="",defaultLocation:o="",title:a="Request a Free Estimate",subtitle:c="Fill out the form and we'll contact you shortly",className:l,compact:d=!1}){const u=o,[m,h]=i.useState({name:"",phone:"",service:s,message:u?`Location: ${u}`:"",website:""}),[g,f]=i.useState({}),[b,j]=i.useState(!1),[y,v]=i.useState(!1),[k,N]=i.useState(!1),[w,L]=i.useState(null),{executeRecaptcha:S,isLoaded:B}=D({siteKey:r,action:"hero_booking_form"}),P=(e,r)=>{h(t=>({...t,[e]:r})),g[e]&&f(r=>({...r,[e]:void 0}))};return y?e.jsxs(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:n("rounded-2xl bg-card p-8 text-center shadow-2xl",l),children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-success-100 dark:bg-success-900/30",children:e.jsx("svg",{className:"h-8 w-8 text-success-600 dark:text-success-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-xl font-bold",children:"Request Submitted!"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"We'll call you shortly to confirm."})]}):e.jsxs(e.Fragment,{children:[e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:n("rounded-2xl bg-card p-6 shadow-2xl lg:p-8",l),children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h3",{className:"text-xl font-bold lg:text-2xl",children:a}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:c})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return x(m.name)||(e.name="Required"),x(m.phone)?V(m.phone)||(e.phone="Invalid phone"):e.phone="Required",x(m.service)||(e.service="Select service"),k||(e.consent="Please agree to be contacted"),f(e),0===Object.keys(e).length})()){if(m.website)return void v(!0);j(!0),f({});try{const e=await S("hero_booking_form");if(!e)throw new Error("reCAPTCHA verification failed. Please try again.");const r=new FormData;r.append("name",m.name),r.append("email",""),r.append("phone",O(m.phone)),r.append("address",u),r.append("service",m.service),r.append("message",m.message||"Quick booking request from hero form"),r.append("recaptcha_token",e),r.append("form_source","hero_booking");const s=sessionStorage.getItem("marketing_params");if(s)try{const e=JSON.parse(s);Object.keys(e).forEach(t=>{r.append(t,e[t])})}catch(e){console.error("[HeroBookingForm] Error parsing tracking params:",e)}const o=await fetch(t,{method:"POST",body:r}),n=await o.json();if(!o.ok||!n.success)throw new Error(n.message||"Failed to submit booking request");v(!0),sessionStorage.setItem("form_submitted","true"),setTimeout(()=>{window.location.href="/thank-you/?type=booking"},1500)}catch(e){const r=e instanceof Error?e.message:"An error occurred";f({form:r})}finally{j(!1)}}},className:"space-y-4",noValidate:!0,children:[g.form&&e.jsx("div",{className:"rounded-lg bg-destructive/10 p-3 text-sm text-destructive",children:g.form}),e.jsx("div",{className:"absolute -left-[9999px]","aria-hidden":"true",children:e.jsx("input",{type:"text",name:"website",value:m.website,onChange:e=>P("website",e.target.value),tabIndex:-1,autoComplete:"off"})}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Your Name *",value:m.name,onChange:e=>P("name",e.target.value),className:n("w-full rounded-lg border bg-background px-4 py-3 text-foreground transition-colors","placeholder:text-muted-foreground","focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",g.name?"border-destructive":"border-input")}),g.name&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:g.name})]}),e.jsxs("div",{children:[e.jsx("input",{type:"tel",placeholder:"Phone Number *",value:m.phone,onChange:e=>P("phone",e.target.value),className:n("w-full rounded-lg border bg-background px-4 py-3 text-foreground transition-colors","placeholder:text-muted-foreground","focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",g.phone?"border-destructive":"border-input")}),g.phone&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:g.phone})]}),e.jsxs("div",{children:[e.jsxs("select",{value:m.service,onChange:e=>P("service",e.target.value),className:n("w-full rounded-lg border bg-background px-4 py-3 text-foreground transition-colors","focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",g.service?"border-destructive":"border-input",!m.service&&"text-muted-foreground"),children:[e.jsx("option",{value:"",children:"Select Service *"}),p.services.map(r=>e.jsx("option",{value:r.slug,children:r.name},r.slug))]}),g.service&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:g.service})]}),!d&&e.jsx("div",{children:e.jsx("textarea",{placeholder:"Describe your needs (optional)",value:m.message,onChange:e=>P("message",e.target.value),rows:3,className:"w-full rounded-lg border border-input bg-background px-4 py-3 text-foreground transition-colors placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:e=>{N(e.target.checked),g.consent&&f(e=>({...e,consent:void 0}))},className:"mt-0.5 h-4 w-4 rounded border-input text-primary focus:ring-primary focus:ring-offset-0"}),e.jsxs("span",{className:"text-xs text-muted-foreground leading-relaxed",children:["I agree to be contacted regarding my request and accept the"," ",e.jsx("button",{type:"button",onClick:()=>L("privacy"),className:"text-primary underline hover:text-primary/80 transition-colors",children:"Privacy Policy"})," ","and"," ",e.jsx("button",{type:"button",onClick:()=>L("terms"),className:"text-primary underline hover:text-primary/80 transition-colors",children:"Terms & Conditions"})]})]}),g.consent&&e.jsx("p",{className:"text-xs text-destructive ml-7",children:g.consent})]}),e.jsx("button",{type:"submit",disabled:b||!B,className:n("w-full rounded-lg bg-primary px-6 py-4 font-semibold text-primary-foreground","transition-all hover:bg-primary/90","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-70"),children:b?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Get Free Estimate"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-px flex-1 bg-border"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"or call now"}),e.jsx("div",{className:"h-px flex-1 bg-border"})]}),e.jsxs("a",{href:`tel:${p.contact.phone.href}`,className:"flex w-full items-center justify-center gap-2 rounded-lg border border-primary bg-primary/5 px-6 py-3 font-semibold text-primary transition-colors hover:bg-primary/10",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),p.contact.phone.display]}),e.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Protected by reCAPTCHA"})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-4 border-t border-border pt-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"h-4 w-4 text-success-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Free Estimates"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"h-4 w-4 text-success-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Licensed & Insured"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"h-4 w-4 text-success-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"No Obligation"]})]})]}),e.jsx(H,{isOpen:null!==w,onClose:()=>L(null),type:w||"privacy"})]})}export{Y as HeroBookingForm};